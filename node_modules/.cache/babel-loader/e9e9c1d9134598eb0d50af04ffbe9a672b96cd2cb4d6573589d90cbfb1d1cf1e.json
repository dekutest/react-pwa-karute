{"ast":null,"code":"import React, { useEffect, useState } from 'react';\nimport { supabase } from '../supabaseClient'; // ← これを追加\n\n// ユーザー情報を登録する関数\nconst registerUser = async user => {\n  try {\n    const {\n      data,\n      error\n    } = await supabase.from('users').upsert([{\n      id: user.id,\n      email: user.email,\n      name: user.user_metadata.full_name || 'No Name',\n      role: 'practitioner' // 初期値として設定\n    }]);\n    if (error) {\n      console.error('ユーザー登録エラー:', error.message);\n    } else if (data) {\n      console.log('ユーザー登録成功:', data);\n    } else {\n      console.warn('アップサートは成功したが、返されたデータが空です');\n    }\n  } catch (err) {\n    console.error('アップサート処理エラー:', err.message);\n  }\n};","map":{"version":3,"names":["React","useEffect","useState","supabase","registerUser","user","data","error","from","upsert","id","email","name","user_metadata","full_name","role","console","message","log","warn","err"],"sources":["/Users/y/Documents/GitHub/react-pwa-karute/src/components/Login.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { supabase } from '../supabaseClient';  // ← これを追加\n\n\n// ユーザー情報を登録する関数\nconst registerUser = async (user) => {\n  try {\n    const { data, error } = await supabase\n      .from('users')\n      .upsert([{ \n        id: user.id,  \n        email: user.email, \n        name: user.user_metadata.full_name || 'No Name', \n        role: 'practitioner'  // 初期値として設定\n      }]);\n\n    if (error) {\n      console.error('ユーザー登録エラー:', error.message);\n    } else if (data) {\n      console.log('ユーザー登録成功:', data);\n    } else {\n      console.warn('アップサートは成功したが、返されたデータが空です');\n    }\n  } catch (err) {\n    console.error('アップサート処理エラー:', err.message);\n  }\n};\n"],"mappings":"AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAClD,SAASC,QAAQ,QAAQ,mBAAmB,CAAC,CAAE;;AAG/C;AACA,MAAMC,YAAY,GAAG,MAAOC,IAAI,IAAK;EACnC,IAAI;IACF,MAAM;MAAEC,IAAI;MAAEC;IAAM,CAAC,GAAG,MAAMJ,QAAQ,CACnCK,IAAI,CAAC,OAAO,CAAC,CACbC,MAAM,CAAC,CAAC;MACPC,EAAE,EAAEL,IAAI,CAACK,EAAE;MACXC,KAAK,EAAEN,IAAI,CAACM,KAAK;MACjBC,IAAI,EAAEP,IAAI,CAACQ,aAAa,CAACC,SAAS,IAAI,SAAS;MAC/CC,IAAI,EAAE,cAAc,CAAE;IACxB,CAAC,CAAC,CAAC;IAEL,IAAIR,KAAK,EAAE;MACTS,OAAO,CAACT,KAAK,CAAC,YAAY,EAAEA,KAAK,CAACU,OAAO,CAAC;IAC5C,CAAC,MAAM,IAAIX,IAAI,EAAE;MACfU,OAAO,CAACE,GAAG,CAAC,WAAW,EAAEZ,IAAI,CAAC;IAChC,CAAC,MAAM;MACLU,OAAO,CAACG,IAAI,CAAC,0BAA0B,CAAC;IAC1C;EACF,CAAC,CAAC,OAAOC,GAAG,EAAE;IACZJ,OAAO,CAACT,KAAK,CAAC,cAAc,EAAEa,GAAG,CAACH,OAAO,CAAC;EAC5C;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}