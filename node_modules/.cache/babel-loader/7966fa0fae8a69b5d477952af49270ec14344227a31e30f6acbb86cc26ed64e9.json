{"ast":null,"code":"var _jsxFileName = \"/Users/y/Documents/GitHub/react-pwa-karute/src/components/Login.js\",\n  _s = $RefreshSig$();\nimport React from 'react';\nimport { supabase } from '../supabaseClient';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Login = () => {\n  _s();\n  const handleGoogleLogin = async () => {\n    const {\n      error\n    } = await supabase.auth.signInWithOAuth({\n      provider: 'google'\n    });\n    if (error) console.error('ログインエラー:', error.message);\n  };\n  const registerUser = async user => {\n    const {\n      data,\n      error\n    } = await supabase.from('users').upsert([{\n      email: user.email,\n      name: user.user_metadata.full_name,\n      role: 'practitioner'\n    }]);\n    if (error) console.error('ユーザー登録エラー:', error.message);else console.log('ユーザー登録完了:', data);\n  };\n  React.useEffect(() => {\n    const getUserInfo = async () => {\n      const {\n        data: {\n          session\n        }\n      } = await supabase.auth.getSession();\n      if (session) {\n        // 初回ログイン時にユーザー情報を登録\n        registerUser(session.user);\n      }\n    };\n    getUserInfo();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Google\\u30ED\\u30B0\\u30A4\\u30F3\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleGoogleLogin,\n      children: \"Google\\u3067\\u30ED\\u30B0\\u30A4\\u30F3\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 32,\n    columnNumber: 5\n  }, this);\n};\n_s(Login, \"OD7bBpZva5O2jO+Puf00hKivP7c=\");\n_c = Login;\nexport default Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["React","supabase","jsxDEV","_jsxDEV","Login","_s","handleGoogleLogin","error","auth","signInWithOAuth","provider","console","message","registerUser","user","data","from","upsert","email","name","user_metadata","full_name","role","log","useEffect","getUserInfo","session","getSession","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","_c","$RefreshReg$"],"sources":["/Users/y/Documents/GitHub/react-pwa-karute/src/components/Login.js"],"sourcesContent":["import React from 'react';\nimport { supabase } from '../supabaseClient';\n\nconst Login = () => {\n  const handleGoogleLogin = async () => {\n    const { error } = await supabase.auth.signInWithOAuth({\n      provider: 'google',\n    });\n    if (error) console.error('ログインエラー:', error.message);\n  };\n\n  const registerUser = async (user) => {\n    const { data, error } = await supabase\n      .from('users')\n      .upsert([{ email: user.email, name: user.user_metadata.full_name, role: 'practitioner' }]);\n    if (error) console.error('ユーザー登録エラー:', error.message);\n    else console.log('ユーザー登録完了:', data);\n  };\n\n  React.useEffect(() => {\n    const getUserInfo = async () => {\n      const { data: { session } } = await supabase.auth.getSession();\n      if (session) {\n        // 初回ログイン時にユーザー情報を登録\n        registerUser(session.user);\n      }\n    };\n    getUserInfo();\n  }, []);\n\n  return (\n    <div>\n      <h2>Googleログイン</h2>\n      <button onClick={handleGoogleLogin}>Googleでログイン</button>\n    </div>\n  );\n};\n\nexport default Login;\n"],"mappings":";;AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,QAAQ,QAAQ,mBAAmB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE7C,MAAMC,KAAK,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAClB,MAAMC,iBAAiB,GAAG,MAAAA,CAAA,KAAY;IACpC,MAAM;MAAEC;IAAM,CAAC,GAAG,MAAMN,QAAQ,CAACO,IAAI,CAACC,eAAe,CAAC;MACpDC,QAAQ,EAAE;IACZ,CAAC,CAAC;IACF,IAAIH,KAAK,EAAEI,OAAO,CAACJ,KAAK,CAAC,UAAU,EAAEA,KAAK,CAACK,OAAO,CAAC;EACrD,CAAC;EAED,MAAMC,YAAY,GAAG,MAAOC,IAAI,IAAK;IACnC,MAAM;MAAEC,IAAI;MAAER;IAAM,CAAC,GAAG,MAAMN,QAAQ,CACnCe,IAAI,CAAC,OAAO,CAAC,CACbC,MAAM,CAAC,CAAC;MAAEC,KAAK,EAAEJ,IAAI,CAACI,KAAK;MAAEC,IAAI,EAAEL,IAAI,CAACM,aAAa,CAACC,SAAS;MAAEC,IAAI,EAAE;IAAe,CAAC,CAAC,CAAC;IAC5F,IAAIf,KAAK,EAAEI,OAAO,CAACJ,KAAK,CAAC,YAAY,EAAEA,KAAK,CAACK,OAAO,CAAC,CAAC,KACjDD,OAAO,CAACY,GAAG,CAAC,WAAW,EAAER,IAAI,CAAC;EACrC,CAAC;EAEDf,KAAK,CAACwB,SAAS,CAAC,MAAM;IACpB,MAAMC,WAAW,GAAG,MAAAA,CAAA,KAAY;MAC9B,MAAM;QAAEV,IAAI,EAAE;UAAEW;QAAQ;MAAE,CAAC,GAAG,MAAMzB,QAAQ,CAACO,IAAI,CAACmB,UAAU,CAAC,CAAC;MAC9D,IAAID,OAAO,EAAE;QACX;QACAb,YAAY,CAACa,OAAO,CAACZ,IAAI,CAAC;MAC5B;IACF,CAAC;IACDW,WAAW,CAAC,CAAC;EACf,CAAC,EAAE,EAAE,CAAC;EAEN,oBACEtB,OAAA;IAAAyB,QAAA,gBACEzB,OAAA;MAAAyB,QAAA,EAAI;IAAU;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC,eACnB7B,OAAA;MAAQ8B,OAAO,EAAE3B,iBAAkB;MAAAsB,QAAA,EAAC;IAAW;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAQ,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACrD,CAAC;AAEV,CAAC;AAAC3B,EAAA,CAjCID,KAAK;AAAA8B,EAAA,GAAL9B,KAAK;AAmCX,eAAeA,KAAK;AAAC,IAAA8B,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}